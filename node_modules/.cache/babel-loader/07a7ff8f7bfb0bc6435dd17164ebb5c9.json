{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport TweenOne, { ticker } from 'rc-tween-one';\nimport { polyfill } from 'react-lifecycles-compat';\nimport { toArrayChildren, findChildInChildrenByKey, windowIsUndefined, mergeChildren, transformArguments, getChildrenFromProps } from './utils';\nimport AnimTypes from './animTypes';\n\nvar noop = function noop() {};\n\nvar typeDefault = ['displayName', 'propTypes', 'getDefaultProps', 'defaultProps', 'childContextTypes', 'contextTypes', 'contextType'];\n\nvar QueueAnim = function (_React$Component) {\n  _inherits(QueueAnim, _React$Component);\n\n  _createClass(QueueAnim, null, [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, _ref) {\n      var prevProps = _ref.prevProps,\n          children = _ref.children,\n          prevChildShow = _ref.childrenShow,\n          $self = _ref.$self;\n      var nextState = {\n        prevProps: props\n      };\n\n      if (prevProps && props !== prevProps) {\n        var nextChildren = toArrayChildren(props.children).filter(function (c) {\n          return c;\n        });\n        var currentChildren = $self.originalChildren.filter(function (item) {\n          return item;\n        });\n\n        if (children.length) {\n          /**\n           * 多次刷新处理\n           * 如果 state.children 里还有元素，元素还在动画，当前子级加回在出场的子级;\n           */\n          var leaveChild = children.filter(function (item) {\n            return item && $self.keysToLeave.indexOf(item.key) >= 0;\n          });\n          $self.leaveUnfinishedChild = leaveChild.map(function (item) {\n            if ($self.placeholderTimeoutIds[item.key]) {\n              return item.key;\n            }\n\n            return null;\n          }).filter(function (c) {\n            return c;\n          });\n          /**\n           * 获取 leaveChild 在 state.children 里的序列，再将 leaveChild 和 currentChildren 的重新排序。\n           * 避逸 state.children 在 leaveComplete 里没全部完成不触发，\n           * leaveComplete 里如果动画完成了是会删除 keyToLeave，但 state.children 是在全部出场后才触发清除，\n           * 所以这里需要处理出场完成的元素做清除。\n           */\n\n          var stateChildren = mergeChildren(currentChildren, children);\n          var currentChild = [];\n\n          var childReOrder = function childReOrder(child) {\n            child.forEach(function (item) {\n              var order = stateChildren.findIndex(function (c) {\n                return c.key === item.key;\n              });\n\n              if (currentChild.indexOf(item) !== -1) {\n                return;\n              } // -1 不应该出现的情况，直接插入数组后面.\n\n\n              if (order === -1) {\n                currentChild.push(item);\n              } else {\n                currentChild.splice(order, 0, item);\n              }\n            });\n          };\n\n          childReOrder(leaveChild);\n          childReOrder(currentChildren);\n          currentChildren = currentChild.filter(function (c) {\n            return c;\n          });\n        }\n\n        var newChildren = mergeChildren(currentChildren, nextChildren);\n        var childrenShow = !newChildren.length ? {} : prevChildShow;\n        $self.keysToEnterPaused = {};\n        var emptyBool = !nextChildren.length && !currentChildren.length && children.length;\n        /**\n         * 在出场没结束时，childrenShow 里的值将不会清除。\n         * 再触发进场时， childrenShow 里的值是保留着的, 设置了 forcedReplay 将重新播放进场。\n         */\n\n        if (!emptyBool) {\n          // 空子级状态下刷新不做处理\n          var nextKeys = nextChildren.map(function (c) {\n            return c.key;\n          });\n          $self.keysToLeave.forEach(function (key) {\n            // 将所有在出场里的停止掉。避免间隔性出现\n            if (nextKeys.indexOf(key) >= 0) {\n              $self.keysToEnterPaused[key] = true;\n              currentChildren = currentChildren.filter(function (item) {\n                return item.key !== key;\n              });\n\n              if (props.forcedReplay) {\n                // 清掉所有出场的。\n                delete childrenShow[key];\n              }\n            }\n          });\n        }\n\n        $self.keysToEnter = [];\n        $self.keysToLeave = []; // need render to avoid update\n\n        nextState.childrenShow = childrenShow;\n        nextState.children = newChildren;\n        nextChildren.forEach(function (c) {\n          if (!c) {\n            return;\n          }\n\n          var key = c.key;\n          var hasPrev = findChildInChildrenByKey(currentChildren, key);\n\n          if (!hasPrev && key) {\n            $self.keysToEnter.push(key);\n          }\n        });\n        currentChildren.forEach(function (c) {\n          if (!c) {\n            return;\n          }\n\n          var key = c.key;\n          var hasNext = findChildInChildrenByKey(nextChildren, key);\n\n          if (!hasNext && key) {\n            $self.keysToLeave.push(key);\n            ticker.clear($self.placeholderTimeoutIds[key]);\n            delete $self.placeholderTimeoutIds[key];\n          }\n        });\n      }\n\n      return nextState;\n    }\n  }]);\n\n  function QueueAnim(props) {\n    _classCallCheck(this, QueueAnim);\n    /**\n     * @param tweenToEnter;\n     * 记录强制切换时是否需要添加 animation;\n     * 如 enter 后, leave -> enter，样式是没有发生变化，就不需要添加 animation 属性。\n     */\n\n\n    var _this = _possibleConstructorReturn(this, (QueueAnim.__proto__ || Object.getPrototypeOf(QueueAnim)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.tweenToEnter = {};\n    /**\n     * @param leaveUnfinishedChild;\n     * 记录多次切换，出场没完成动画的 key。\n     */\n\n    _this.leaveUnfinishedChild = [];\n    /**\n     * @param saveTweenOneTag;\n     * 记录 TweenOne 标签，在 leaveUnfinishedChild 里使用，残留的元素不需要考虑 props 的变更。\n     */\n\n    _this.saveTweenOneTag = {};\n    /**\n     * @param childrenShow;\n     * 记录 animation 里是否需要 startAnim;\n     * 当前元素是否处在显示状态\n     * enterBegin 到 leaveComplete 之前都处于显示状态\n     */\n\n    _this.childrenShow = {};\n    /**\n     * @param keysToEnter;\n     * 记录进场的 key;\n     */\n\n    _this.keysToEnter = [];\n    /**\n     * @param keysToLeave;\n     * 记录出场的 key;\n     */\n\n    _this.keysToLeave = [];\n    /**\n     * @param keysToEnterPaused;\n     * 记录在进入时是否处理暂停状态\n     */\n\n    _this.keysToEnterPaused = {};\n    /**\n     * @param placeholderTimeoutIds;\n     * 进场时 deley 的 timeout 记录;\n     */\n\n    _this.placeholderTimeoutIds = {};\n    /**\n     * @param childRefs;\n     * 储存 children 的 ref;\n     */\n\n    _this.childRefs = {};\n    /**\n     * @param currentRef;\n     * 记录 component 是组件时的 ref;\n     */\n\n    _this.currentRef = null; // 第一次进入，默认进场\n\n    var children = toArrayChildren(getChildrenFromProps(props));\n    var childrenShow = {};\n    children.forEach(function (child) {\n      if (!child || !child.key) {\n        return;\n      }\n\n      if (_this.props.appear) {\n        _this.keysToEnter.push(child.key);\n      } else {\n        childrenShow[child.key] = true;\n        _this.tweenToEnter[child.key] = true;\n      }\n    });\n    _this.originalChildren = toArrayChildren(getChildrenFromProps(props));\n    _this.state = {\n      children: children,\n      childrenShow: childrenShow,\n      $self: _this\n    };\n    return _this;\n  }\n\n  _createClass(QueueAnim, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.appear) {\n        this.componentDidUpdate();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.originalChildren = toArrayChildren(getChildrenFromProps(this.props));\n      var keysToEnter = [].concat(_toConsumableArray(this.keysToEnter));\n      var keysToLeave = [].concat(_toConsumableArray(this.keysToLeave));\n      keysToEnter.forEach(this.performEnter);\n      keysToLeave.forEach(this.performLeave);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var _this2 = this;\n\n      Object.keys(this.placeholderTimeoutIds).forEach(function (key) {\n        ticker.clear(_this2.placeholderTimeoutIds[key]);\n      });\n      this.keysToEnter = [];\n      this.keysToLeave = [];\n      this.childrenShow = {};\n    }\n  }, {\n    key: 'getTweenType',\n    value: function getTweenType(type, num) {\n      var data = AnimTypes[type];\n      return this.getTweenAnimConfig(data, num);\n    }\n  }, {\n    key: 'getTweenAnimConfig',\n    value: function getTweenAnimConfig(data, num, enterOrLeave) {\n      var _this3 = this;\n\n      if (Array.isArray(data)) {\n        return data.map(function (item) {\n          return _this3.getTweenSingleConfig(item, num, enterOrLeave);\n        });\n      }\n\n      return this.getTweenSingleConfig(data, num, enterOrLeave);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props = this.props,\n          component = _props.component,\n          componentProps = _props.componentProps,\n          interval = _props.interval,\n          duration = _props.duration,\n          delay = _props.delay,\n          type = _props.type,\n          animConfig = _props.animConfig,\n          ease = _props.ease,\n          leaveReverse = _props.leaveReverse,\n          animatingClassName = _props.animatingClassName,\n          forcedReplay = _props.forcedReplay,\n          onEnd = _props.onEnd,\n          appear = _props.appear,\n          tagProps = _objectWithoutProperties(_props, ['component', 'componentProps', 'interval', 'duration', 'delay', 'type', 'animConfig', 'ease', 'leaveReverse', 'animatingClassName', 'forcedReplay', 'onEnd', 'appear']);\n\n      if (windowIsUndefined) {\n        return createElement(component, _extends({}, tagProps, componentProps), this.props.children);\n      }\n\n      var childrenToRender = toArrayChildren(this.state.children).map(this.getChildrenToRender);\n\n      var props = _extends({}, tagProps, this.props.componentProps, {\n        ref: function ref(c) {\n          _this4.currentRef = c;\n        }\n      });\n\n      return createElement(this.props.component, props, childrenToRender);\n    }\n  }]);\n\n  return QueueAnim;\n}(React.Component);\n\nQueueAnim.propTypes = {\n  children: PropTypes.any,\n  component: PropTypes.any,\n  componentProps: PropTypes.object,\n  interval: PropTypes.any,\n  duration: PropTypes.any,\n  delay: PropTypes.any,\n  type: PropTypes.any,\n  animConfig: PropTypes.any,\n  ease: PropTypes.any,\n  leaveReverse: PropTypes.bool,\n  forcedReplay: PropTypes.bool,\n  animatingClassName: PropTypes.array,\n  onEnd: PropTypes.func,\n  appear: PropTypes.bool\n};\nQueueAnim.defaultProps = {\n  component: 'div',\n  componentProps: {},\n  interval: 100,\n  duration: 450,\n  delay: 0,\n  type: 'right',\n  animConfig: null,\n  ease: 'easeOutQuart',\n  leaveReverse: false,\n  forcedReplay: false,\n  animatingClassName: ['queue-anim-entering', 'queue-anim-leaving'],\n  onEnd: noop,\n  appear: true\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.getTweenSingleConfig = function (data, num, enterOrLeave) {\n    var obj = {};\n    Object.keys(data).forEach(function (key) {\n      if (Array.isArray(data[key])) {\n        obj[key] = data[key][num];\n      } else if (!enterOrLeave && !num || enterOrLeave && num) {\n        obj[key] = data[key];\n      }\n    });\n    return obj;\n  };\n\n  this.getTweenData = function (key, i, type) {\n    var props = _this5.props;\n    var enterOrLeave = type === 'enter' ? 0 : 1;\n    var start = type === 'enter' ? 1 : 0;\n    var end = type === 'enter' ? 0 : 1;\n\n    var animate = _this5.getAnimData(props, key, i, enterOrLeave, end);\n\n    var startAnim = type === 'enter' && (props.forcedReplay || !_this5.childrenShow[key]) ? _this5.getAnimData(props, key, i, enterOrLeave, start) : null;\n    var ease = transformArguments(props.ease, key, i)[enterOrLeave];\n    var duration = transformArguments(props.duration, key, i)[enterOrLeave];\n\n    if (Array.isArray(ease)) {\n      ease = ease.map(function (num) {\n        return num * 100;\n      });\n      ease = TweenOne.easing.path('M0,100C' + ease[0] + ',' + (100 - ease[1]) + ',' + ease[2] + ',' + (100 - ease[3]) + ',100,0', {\n        lengthPixel: duration / 16.6667\n      });\n    }\n\n    return {\n      startAnim: startAnim,\n      animate: animate,\n      ease: ease,\n      duration: duration,\n      isArray: Array.isArray(animate)\n    };\n  };\n\n  this.getTweenSingleData = function (startAnim, animate, ease, duration, delay, onStart, onComplete) {\n    var startLength = Object.keys(startAnim || {}).length;\n\n    var animation = _extends({\n      onStart: onStart,\n      onComplete: onComplete,\n      duration: duration,\n      delay: delay,\n      ease: ease\n    }, animate);\n\n    var startAnimate = startLength ? _extends({\n      duration: 0\n    }, startAnim) : null;\n    return {\n      animation: animation,\n      startAnimate: startAnimate\n    };\n  };\n\n  this.getTweenEnterOrLeaveData = function (key, i, delay, type) {\n    var animateData = _this5.getTweenData(key, i, type);\n\n    var startAnim = animateData.startAnim;\n    var animate = animateData.animate;\n    var onStart = (type === 'enter' ? _this5.enterBegin : _this5.leaveBegin).bind(_this5, key);\n    var onComplete = (type === 'enter' ? _this5.enterComplete : _this5.leaveComplete).bind(_this5, key);\n\n    if (animateData.isArray) {\n      var length = animate.length - 1;\n      var animation = [];\n      var startArray = [];\n      animate.forEach(function (leave, ii) {\n        var start = startAnim && startAnim[ii];\n\n        var animObj = _this5.getTweenSingleData(start, leave, animateData.ease, animateData.duration / length, !ii ? delay : 0, !ii ? onStart : null, ii === length ? onComplete : null);\n\n        animation.push(animObj.animation);\n\n        if (animObj.startAnimate) {\n          startArray.push(animObj.startAnimate);\n        }\n      });\n      return startArray.concat(animation);\n    }\n\n    animateData = _this5.getTweenSingleData(startAnim, animate, animateData.ease, animateData.duration, delay, onStart, onComplete);\n    return [animateData.startAnimate, animateData.animation].filter(function (item) {\n      return item;\n    });\n  };\n\n  this.getAnimData = function (props, key, i, enterOrLeave, startOrEnd) {\n    /**\n     * transformArguments 第一个为 enter, 第二个为 leave；\n     * getTweenAnimConfig or getTweenType 第一个为到达的位置， 第二个为开始的位置。\n     * 用 tween-one 的数组来实现老的动画逻辑。。。\n     */\n    return props.animConfig ? _this5.getTweenAnimConfig(transformArguments(props.animConfig, key, i)[enterOrLeave], startOrEnd, enterOrLeave) : _this5.getTweenType(transformArguments(props.type, key, i)[enterOrLeave], startOrEnd);\n  };\n\n  this.getChildrenToRender = function (child) {\n    var _props2 = _this5.props,\n        forcedReplay = _props2.forcedReplay,\n        leaveReverse = _props2.leaveReverse,\n        delay = _props2.delay,\n        interval = _props2.interval,\n        children = _props2.children;\n\n    if (!child || !child.key) {\n      return child;\n    }\n\n    var key = child.key;\n\n    if (!_this5.state.childrenShow[key]) {\n      return null;\n    }\n\n    var i = _this5.keysToLeave.indexOf(key);\n\n    var animation = void 0;\n    var isFunc = typeof child.type === 'function';\n    var forcedJudg = isFunc ? {} : null;\n\n    if (isFunc) {\n      Object.keys(child.type).forEach(function (name) {\n        if (typeDefault.indexOf(name) === -1) {\n          forcedJudg[name] = child.type[name];\n        }\n      });\n    }\n\n    var ref = function ref() {\n      delete _this5.childRefs[key];\n    }; // 处理出场\n\n\n    if (i >= 0) {\n      if (_this5.leaveUnfinishedChild.indexOf(key) >= 0) {\n        return _this5.saveTweenOneTag[key];\n      }\n\n      var $interval = transformArguments(interval, key, i)[1];\n      var $delay = transformArguments(delay, key, i)[1]; // 减掉 leaveUnfinishedChild 里的个数，因为 leaveUnfinishedChild 是旧的出场，不应该计录在队列里。\n\n      var order = (leaveReverse ? _this5.keysToLeave.length - i - 1 : i) - _this5.leaveUnfinishedChild.length;\n      $delay = $interval * order + $delay;\n      animation = _this5.getTweenEnterOrLeaveData(key, i, $delay, 'leave');\n    } else {\n      // 处理进场;\n      i = toArrayChildren(children).findIndex(function (c) {\n        return c && c.key === key;\n      });\n\n      ref = function ref(c) {\n        _this5.childRefs[key] = c && c.currentRef ? c.currentRef : c;\n      }; // appear=\bfalse 时，设定 childrenShow 和 tweenToEnter 都为 true, 这里不渲染 animation;\n\n\n      if (_this5.tweenToEnter[key] && !forcedReplay) {\n        // 如果是已进入的，将直接返回标签。。\n        return createElement(TweenOne, {\n          key: key,\n          component: child.type,\n          forcedJudg: forcedJudg,\n          componentProps: child.props,\n          ref: ref\n        });\n      }\n\n      if (!_this5.tweenToEnter[key] || forcedReplay) {\n        animation = _this5.getTweenEnterOrLeaveData(key, i, 0, 'enter');\n      }\n    }\n\n    var paused = _this5.keysToEnterPaused[key] && _this5.keysToLeave.indexOf(key) === -1;\n    animation = paused ? null : animation;\n    var tag = createElement(TweenOne, {\n      key: key,\n      component: child.type,\n      forcedJudg: forcedJudg,\n      componentProps: child.props,\n      animation: animation,\n      ref: ref\n    });\n    _this5.saveTweenOneTag[key] = tag;\n    return tag;\n  };\n\n  this.performEnter = function (key, i) {\n    var interval = transformArguments(_this5.props.interval, key, i)[0];\n    var delay = transformArguments(_this5.props.delay, key, i)[0];\n    _this5.placeholderTimeoutIds[key] = ticker.timeout(_this5.performEnterBegin.bind(_this5, key), interval * i + delay);\n\n    if (_this5.keysToEnter.indexOf(key) >= 0) {\n      _this5.keysToEnter.splice(_this5.keysToEnter.indexOf(key), 1);\n    }\n  };\n\n  this.performEnterBegin = function (key) {\n    var childrenShow = _this5.state.childrenShow;\n    childrenShow[key] = true;\n    delete _this5.keysToEnterPaused[key];\n    ticker.clear(_this5.placeholderTimeoutIds[key]);\n    delete _this5.placeholderTimeoutIds[key];\n\n    _this5.setState({\n      childrenShow: childrenShow\n    });\n  };\n\n  this.performLeave = function (key) {\n    ticker.clear(_this5.placeholderTimeoutIds[key]);\n    delete _this5.placeholderTimeoutIds[key];\n  };\n\n  this.enterBegin = function (key, e) {\n    var elem = e.target;\n    var animatingClassName = _this5.props.animatingClassName;\n    elem.className = elem.className.replace(animatingClassName[1], '');\n\n    if (elem.className.indexOf(animatingClassName[0]) === -1) {\n      elem.className = (elem.className + ' ' + animatingClassName[0]).trim();\n    }\n\n    _this5.childrenShow[key] = true;\n  };\n\n  this.enterComplete = function (key, e) {\n    if (_this5.keysToEnterPaused[key] || _this5.keysToLeave.indexOf(key) >= 0) {\n      return;\n    }\n\n    var elem = e.target;\n    elem.className = elem.className.replace(_this5.props.animatingClassName[0], '').trim();\n    _this5.tweenToEnter[key] = true;\n\n    _this5.props.onEnd({\n      key: key,\n      type: 'enter',\n      target: elem\n    });\n  };\n\n  this.leaveBegin = function (key, e) {\n    var elem = e.target;\n    var animatingClassName = _this5.props.animatingClassName;\n    elem.className = elem.className.replace(animatingClassName[0], '');\n\n    if (elem.className.indexOf(animatingClassName[1]) === -1) {\n      elem.className = (elem.className + ' ' + animatingClassName[1]).trim();\n    }\n\n    delete _this5.tweenToEnter[key];\n  };\n\n  this.leaveComplete = function (key, e) {\n    // 切换时同时触发 onComplete。 手动跳出。。。\n    if (toArrayChildren(_this5.props.children).findIndex(function (c) {\n      return c && c.key === key;\n    }) >= 0) {\n      return;\n    }\n\n    var childrenShow = _this5.state.childrenShow;\n    delete childrenShow[key];\n    delete _this5.saveTweenOneTag[key];\n    delete _this5.childrenShow[key];\n\n    if (_this5.keysToLeave.indexOf(key) >= 0) {\n      _this5.keysToLeave.splice(_this5.keysToLeave.indexOf(key), 1);\n    }\n\n    var needLeave = _this5.keysToLeave.some(function (c) {\n      return childrenShow[c];\n    });\n\n    if (!needLeave) {\n      var currentChildren = toArrayChildren(getChildrenFromProps(_this5.props));\n\n      _this5.setState({\n        children: currentChildren,\n        childrenShow: childrenShow\n      });\n    }\n\n    var elem = e.target;\n    elem.className = elem.className.replace(_this5.props.animatingClassName[1], '').trim();\n\n    _this5.props.onEnd({\n      key: key,\n      type: 'leave',\n      target: elem\n    });\n  };\n};\n\nQueueAnim.isQueueAnim = true;\nexport default polyfill(QueueAnim);","map":{"version":3,"sources":["/Users/manhsy/Developer/manhsy-portfolio/node_modules/rc-queue-anim/es/QueueAnim.js"],"names":["_extends","_objectWithoutProperties","_toConsumableArray","_classCallCheck","_possibleConstructorReturn","_createClass","_inherits","React","createElement","PropTypes","TweenOne","ticker","polyfill","toArrayChildren","findChildInChildrenByKey","windowIsUndefined","mergeChildren","transformArguments","getChildrenFromProps","AnimTypes","noop","typeDefault","QueueAnim","_React$Component","key","value","getDerivedStateFromProps","props","_ref","prevProps","children","prevChildShow","childrenShow","$self","nextState","nextChildren","filter","c","currentChildren","originalChildren","item","length","leaveChild","keysToLeave","indexOf","leaveUnfinishedChild","map","placeholderTimeoutIds","stateChildren","currentChild","childReOrder","child","forEach","order","findIndex","push","splice","newChildren","keysToEnterPaused","emptyBool","nextKeys","forcedReplay","keysToEnter","hasPrev","hasNext","clear","_this","__proto__","Object","getPrototypeOf","call","_initialiseProps","tweenToEnter","saveTweenOneTag","childRefs","currentRef","appear","state","componentDidMount","componentDidUpdate","concat","performEnter","performLeave","componentWillUnmount","_this2","keys","getTweenType","type","num","data","getTweenAnimConfig","enterOrLeave","_this3","Array","isArray","getTweenSingleConfig","render","_this4","_props","component","componentProps","interval","duration","delay","animConfig","ease","leaveReverse","animatingClassName","onEnd","tagProps","childrenToRender","getChildrenToRender","ref","Component","propTypes","any","object","bool","array","func","defaultProps","_this5","obj","getTweenData","i","start","end","animate","getAnimData","startAnim","easing","path","lengthPixel","getTweenSingleData","onStart","onComplete","startLength","animation","startAnimate","getTweenEnterOrLeaveData","animateData","enterBegin","leaveBegin","bind","enterComplete","leaveComplete","startArray","leave","ii","animObj","startOrEnd","_props2","isFunc","forcedJudg","name","$interval","$delay","paused","tag","timeout","performEnterBegin","setState","e","elem","target","className","replace","trim","needLeave","some","isQueueAnim"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _objectWithoutProperties from 'babel-runtime/helpers/objectWithoutProperties';\nimport _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport TweenOne, { ticker } from 'rc-tween-one';\nimport { polyfill } from 'react-lifecycles-compat';\n\nimport { toArrayChildren, findChildInChildrenByKey, windowIsUndefined, mergeChildren, transformArguments, getChildrenFromProps } from './utils';\nimport AnimTypes from './animTypes';\n\nvar noop = function noop() {};\n\nvar typeDefault = ['displayName', 'propTypes', 'getDefaultProps', 'defaultProps', 'childContextTypes', 'contextTypes', 'contextType'];\n\nvar QueueAnim = function (_React$Component) {\n  _inherits(QueueAnim, _React$Component);\n\n  _createClass(QueueAnim, null, [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, _ref) {\n      var prevProps = _ref.prevProps,\n          children = _ref.children,\n          prevChildShow = _ref.childrenShow,\n          $self = _ref.$self;\n\n      var nextState = {\n        prevProps: props\n      };\n      if (prevProps && props !== prevProps) {\n        var nextChildren = toArrayChildren(props.children).filter(function (c) {\n          return c;\n        });\n        var currentChildren = $self.originalChildren.filter(function (item) {\n          return item;\n        });\n        if (children.length) {\n          /**\n           * 多次刷新处理\n           * 如果 state.children 里还有元素，元素还在动画，当前子级加回在出场的子级;\n           */\n          var leaveChild = children.filter(function (item) {\n            return item && $self.keysToLeave.indexOf(item.key) >= 0;\n          });\n          $self.leaveUnfinishedChild = leaveChild.map(function (item) {\n            if ($self.placeholderTimeoutIds[item.key]) {\n              return item.key;\n            }\n            return null;\n          }).filter(function (c) {\n            return c;\n          });\n          /**\n           * 获取 leaveChild 在 state.children 里的序列，再将 leaveChild 和 currentChildren 的重新排序。\n           * 避逸 state.children 在 leaveComplete 里没全部完成不触发，\n           * leaveComplete 里如果动画完成了是会删除 keyToLeave，但 state.children 是在全部出场后才触发清除，\n           * 所以这里需要处理出场完成的元素做清除。\n           */\n          var stateChildren = mergeChildren(currentChildren, children);\n          var currentChild = [];\n          var childReOrder = function childReOrder(child) {\n            child.forEach(function (item) {\n              var order = stateChildren.findIndex(function (c) {\n                return c.key === item.key;\n              });\n              if (currentChild.indexOf(item) !== -1) {\n                return;\n              }\n              // -1 不应该出现的情况，直接插入数组后面.\n              if (order === -1) {\n                currentChild.push(item);\n              } else {\n                currentChild.splice(order, 0, item);\n              }\n            });\n          };\n          childReOrder(leaveChild);\n          childReOrder(currentChildren);\n          currentChildren = currentChild.filter(function (c) {\n            return c;\n          });\n        }\n        var newChildren = mergeChildren(currentChildren, nextChildren);\n        var childrenShow = !newChildren.length ? {} : prevChildShow;\n        $self.keysToEnterPaused = {};\n        var emptyBool = !nextChildren.length && !currentChildren.length && children.length;\n        /**\n         * 在出场没结束时，childrenShow 里的值将不会清除。\n         * 再触发进场时， childrenShow 里的值是保留着的, 设置了 forcedReplay 将重新播放进场。\n         */\n        if (!emptyBool) {\n          // 空子级状态下刷新不做处理\n          var nextKeys = nextChildren.map(function (c) {\n            return c.key;\n          });\n          $self.keysToLeave.forEach(function (key) {\n            // 将所有在出场里的停止掉。避免间隔性出现\n            if (nextKeys.indexOf(key) >= 0) {\n              $self.keysToEnterPaused[key] = true;\n              currentChildren = currentChildren.filter(function (item) {\n                return item.key !== key;\n              });\n              if (props.forcedReplay) {\n                // 清掉所有出场的。\n                delete childrenShow[key];\n              }\n            }\n          });\n        }\n\n        $self.keysToEnter = [];\n        $self.keysToLeave = [];\n\n        // need render to avoid update\n        nextState.childrenShow = childrenShow;\n        nextState.children = newChildren;\n\n        nextChildren.forEach(function (c) {\n          if (!c) {\n            return;\n          }\n          var key = c.key;\n          var hasPrev = findChildInChildrenByKey(currentChildren, key);\n          if (!hasPrev && key) {\n            $self.keysToEnter.push(key);\n          }\n        });\n\n        currentChildren.forEach(function (c) {\n          if (!c) {\n            return;\n          }\n          var key = c.key;\n          var hasNext = findChildInChildrenByKey(nextChildren, key);\n          if (!hasNext && key) {\n            $self.keysToLeave.push(key);\n            ticker.clear($self.placeholderTimeoutIds[key]);\n            delete $self.placeholderTimeoutIds[key];\n          }\n        });\n      }\n      return nextState;\n    }\n  }]);\n\n  function QueueAnim(props) {\n    _classCallCheck(this, QueueAnim);\n\n    /**\n     * @param tweenToEnter;\n     * 记录强制切换时是否需要添加 animation;\n     * 如 enter 后, leave -> enter，样式是没有发生变化，就不需要添加 animation 属性。\n     */\n    var _this = _possibleConstructorReturn(this, (QueueAnim.__proto__ || Object.getPrototypeOf(QueueAnim)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.tweenToEnter = {};\n    /**\n     * @param leaveUnfinishedChild;\n     * 记录多次切换，出场没完成动画的 key。\n     */\n    _this.leaveUnfinishedChild = [];\n    /**\n     * @param saveTweenOneTag;\n     * 记录 TweenOne 标签，在 leaveUnfinishedChild 里使用，残留的元素不需要考虑 props 的变更。\n     */\n    _this.saveTweenOneTag = {};\n    /**\n     * @param childrenShow;\n     * 记录 animation 里是否需要 startAnim;\n     * 当前元素是否处在显示状态\n     * enterBegin 到 leaveComplete 之前都处于显示状态\n     */\n    _this.childrenShow = {};\n    /**\n     * @param keysToEnter;\n     * 记录进场的 key;\n     */\n    _this.keysToEnter = [];\n    /**\n     * @param keysToLeave;\n     * 记录出场的 key;\n     */\n    _this.keysToLeave = [];\n    /**\n     * @param keysToEnterPaused;\n     * 记录在进入时是否处理暂停状态\n     */\n    _this.keysToEnterPaused = {};\n    /**\n     * @param placeholderTimeoutIds;\n     * 进场时 deley 的 timeout 记录;\n     */\n    _this.placeholderTimeoutIds = {};\n    /**\n     * @param childRefs;\n     * 储存 children 的 ref;\n     */\n    _this.childRefs = {};\n    /**\n     * @param currentRef;\n     * 记录 component 是组件时的 ref;\n     */\n    _this.currentRef = null;\n    // 第一次进入，默认进场\n    var children = toArrayChildren(getChildrenFromProps(props));\n    var childrenShow = {};\n    children.forEach(function (child) {\n      if (!child || !child.key) {\n        return;\n      }\n      if (_this.props.appear) {\n        _this.keysToEnter.push(child.key);\n      } else {\n        childrenShow[child.key] = true;\n        _this.tweenToEnter[child.key] = true;\n      }\n    });\n    _this.originalChildren = toArrayChildren(getChildrenFromProps(props));\n    _this.state = {\n      children: children,\n      childrenShow: childrenShow,\n      $self: _this\n    };\n    return _this;\n  }\n\n  _createClass(QueueAnim, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.appear) {\n        this.componentDidUpdate();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.originalChildren = toArrayChildren(getChildrenFromProps(this.props));\n      var keysToEnter = [].concat(_toConsumableArray(this.keysToEnter));\n      var keysToLeave = [].concat(_toConsumableArray(this.keysToLeave));\n      keysToEnter.forEach(this.performEnter);\n      keysToLeave.forEach(this.performLeave);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var _this2 = this;\n\n      Object.keys(this.placeholderTimeoutIds).forEach(function (key) {\n        ticker.clear(_this2.placeholderTimeoutIds[key]);\n      });\n      this.keysToEnter = [];\n      this.keysToLeave = [];\n      this.childrenShow = {};\n    }\n  }, {\n    key: 'getTweenType',\n    value: function getTweenType(type, num) {\n      var data = AnimTypes[type];\n      return this.getTweenAnimConfig(data, num);\n    }\n  }, {\n    key: 'getTweenAnimConfig',\n    value: function getTweenAnimConfig(data, num, enterOrLeave) {\n      var _this3 = this;\n\n      if (Array.isArray(data)) {\n        return data.map(function (item) {\n          return _this3.getTweenSingleConfig(item, num, enterOrLeave);\n        });\n      }\n      return this.getTweenSingleConfig(data, num, enterOrLeave);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props = this.props,\n          component = _props.component,\n          componentProps = _props.componentProps,\n          interval = _props.interval,\n          duration = _props.duration,\n          delay = _props.delay,\n          type = _props.type,\n          animConfig = _props.animConfig,\n          ease = _props.ease,\n          leaveReverse = _props.leaveReverse,\n          animatingClassName = _props.animatingClassName,\n          forcedReplay = _props.forcedReplay,\n          onEnd = _props.onEnd,\n          appear = _props.appear,\n          tagProps = _objectWithoutProperties(_props, ['component', 'componentProps', 'interval', 'duration', 'delay', 'type', 'animConfig', 'ease', 'leaveReverse', 'animatingClassName', 'forcedReplay', 'onEnd', 'appear']);\n\n      if (windowIsUndefined) {\n        return createElement(component, _extends({}, tagProps, componentProps), this.props.children);\n      }\n      var childrenToRender = toArrayChildren(this.state.children).map(this.getChildrenToRender);\n      var props = _extends({}, tagProps, this.props.componentProps, {\n        ref: function ref(c) {\n          _this4.currentRef = c;\n        }\n      });\n      return createElement(this.props.component, props, childrenToRender);\n    }\n  }]);\n\n  return QueueAnim;\n}(React.Component);\n\nQueueAnim.propTypes = {\n  children: PropTypes.any,\n  component: PropTypes.any,\n  componentProps: PropTypes.object,\n  interval: PropTypes.any,\n  duration: PropTypes.any,\n  delay: PropTypes.any,\n  type: PropTypes.any,\n  animConfig: PropTypes.any,\n  ease: PropTypes.any,\n  leaveReverse: PropTypes.bool,\n  forcedReplay: PropTypes.bool,\n  animatingClassName: PropTypes.array,\n  onEnd: PropTypes.func,\n  appear: PropTypes.bool\n};\nQueueAnim.defaultProps = {\n  component: 'div',\n  componentProps: {},\n  interval: 100,\n  duration: 450,\n  delay: 0,\n  type: 'right',\n  animConfig: null,\n  ease: 'easeOutQuart',\n  leaveReverse: false,\n  forcedReplay: false,\n  animatingClassName: ['queue-anim-entering', 'queue-anim-leaving'],\n  onEnd: noop,\n  appear: true\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.getTweenSingleConfig = function (data, num, enterOrLeave) {\n    var obj = {};\n    Object.keys(data).forEach(function (key) {\n      if (Array.isArray(data[key])) {\n        obj[key] = data[key][num];\n      } else if (!enterOrLeave && !num || enterOrLeave && num) {\n        obj[key] = data[key];\n      }\n    });\n    return obj;\n  };\n\n  this.getTweenData = function (key, i, type) {\n    var props = _this5.props;\n    var enterOrLeave = type === 'enter' ? 0 : 1;\n    var start = type === 'enter' ? 1 : 0;\n    var end = type === 'enter' ? 0 : 1;\n    var animate = _this5.getAnimData(props, key, i, enterOrLeave, end);\n    var startAnim = type === 'enter' && (props.forcedReplay || !_this5.childrenShow[key]) ? _this5.getAnimData(props, key, i, enterOrLeave, start) : null;\n    var ease = transformArguments(props.ease, key, i)[enterOrLeave];\n    var duration = transformArguments(props.duration, key, i)[enterOrLeave];\n    if (Array.isArray(ease)) {\n      ease = ease.map(function (num) {\n        return num * 100;\n      });\n      ease = TweenOne.easing.path('M0,100C' + ease[0] + ',' + (100 - ease[1]) + ',' + ease[2] + ',' + (100 - ease[3]) + ',100,0', { lengthPixel: duration / 16.6667 });\n    }\n    return { startAnim: startAnim, animate: animate, ease: ease, duration: duration, isArray: Array.isArray(animate) };\n  };\n\n  this.getTweenSingleData = function (startAnim, animate, ease, duration, delay, onStart, onComplete) {\n    var startLength = Object.keys(startAnim || {}).length;\n    var animation = _extends({\n      onStart: onStart,\n      onComplete: onComplete,\n      duration: duration,\n      delay: delay,\n      ease: ease\n    }, animate);\n    var startAnimate = startLength ? _extends({ duration: 0 }, startAnim) : null;\n    return { animation: animation, startAnimate: startAnimate };\n  };\n\n  this.getTweenEnterOrLeaveData = function (key, i, delay, type) {\n    var animateData = _this5.getTweenData(key, i, type);\n    var startAnim = animateData.startAnim;\n    var animate = animateData.animate;\n    var onStart = (type === 'enter' ? _this5.enterBegin : _this5.leaveBegin).bind(_this5, key);\n    var onComplete = (type === 'enter' ? _this5.enterComplete : _this5.leaveComplete).bind(_this5, key);\n    if (animateData.isArray) {\n      var length = animate.length - 1;\n      var animation = [];\n      var startArray = [];\n      animate.forEach(function (leave, ii) {\n        var start = startAnim && startAnim[ii];\n        var animObj = _this5.getTweenSingleData(start, leave, animateData.ease, animateData.duration / length, !ii ? delay : 0, !ii ? onStart : null, ii === length ? onComplete : null);\n        animation.push(animObj.animation);\n        if (animObj.startAnimate) {\n          startArray.push(animObj.startAnimate);\n        }\n      });\n      return startArray.concat(animation);\n    }\n    animateData = _this5.getTweenSingleData(startAnim, animate, animateData.ease, animateData.duration, delay, onStart, onComplete);\n    return [animateData.startAnimate, animateData.animation].filter(function (item) {\n      return item;\n    });\n  };\n\n  this.getAnimData = function (props, key, i, enterOrLeave, startOrEnd) {\n    /**\n     * transformArguments 第一个为 enter, 第二个为 leave；\n     * getTweenAnimConfig or getTweenType 第一个为到达的位置， 第二个为开始的位置。\n     * 用 tween-one 的数组来实现老的动画逻辑。。。\n     */\n    return props.animConfig ? _this5.getTweenAnimConfig(transformArguments(props.animConfig, key, i)[enterOrLeave], startOrEnd, enterOrLeave) : _this5.getTweenType(transformArguments(props.type, key, i)[enterOrLeave], startOrEnd);\n  };\n\n  this.getChildrenToRender = function (child) {\n    var _props2 = _this5.props,\n        forcedReplay = _props2.forcedReplay,\n        leaveReverse = _props2.leaveReverse,\n        delay = _props2.delay,\n        interval = _props2.interval,\n        children = _props2.children;\n\n    if (!child || !child.key) {\n      return child;\n    }\n    var key = child.key;\n    if (!_this5.state.childrenShow[key]) {\n      return null;\n    }\n    var i = _this5.keysToLeave.indexOf(key);\n    var animation = void 0;\n    var isFunc = typeof child.type === 'function';\n    var forcedJudg = isFunc ? {} : null;\n    if (isFunc) {\n      Object.keys(child.type).forEach(function (name) {\n        if (typeDefault.indexOf(name) === -1) {\n          forcedJudg[name] = child.type[name];\n        }\n      });\n    }\n    var ref = function ref() {\n      delete _this5.childRefs[key];\n    };\n    // 处理出场\n    if (i >= 0) {\n      if (_this5.leaveUnfinishedChild.indexOf(key) >= 0) {\n        return _this5.saveTweenOneTag[key];\n      }\n      var $interval = transformArguments(interval, key, i)[1];\n      var $delay = transformArguments(delay, key, i)[1];\n      // 减掉 leaveUnfinishedChild 里的个数，因为 leaveUnfinishedChild 是旧的出场，不应该计录在队列里。\n      var order = (leaveReverse ? _this5.keysToLeave.length - i - 1 : i) - _this5.leaveUnfinishedChild.length;\n      $delay = $interval * order + $delay;\n      animation = _this5.getTweenEnterOrLeaveData(key, i, $delay, 'leave');\n    } else {\n      // 处理进场;\n      i = toArrayChildren(children).findIndex(function (c) {\n        return c && c.key === key;\n      });\n      ref = function ref(c) {\n        _this5.childRefs[key] = c && c.currentRef ? c.currentRef : c;\n      };\n      // appear=\bfalse 时，设定 childrenShow 和 tweenToEnter 都为 true, 这里不渲染 animation;\n      if (_this5.tweenToEnter[key] && !forcedReplay) {\n        // 如果是已进入的，将直接返回标签。。\n        return createElement(TweenOne, {\n          key: key,\n          component: child.type,\n          forcedJudg: forcedJudg,\n          componentProps: child.props,\n          ref: ref\n        });\n      }\n      if (!_this5.tweenToEnter[key] || forcedReplay) {\n        animation = _this5.getTweenEnterOrLeaveData(key, i, 0, 'enter');\n      }\n    }\n    var paused = _this5.keysToEnterPaused[key] && _this5.keysToLeave.indexOf(key) === -1;\n    animation = paused ? null : animation;\n    var tag = createElement(TweenOne, {\n      key: key,\n      component: child.type,\n      forcedJudg: forcedJudg,\n      componentProps: child.props,\n      animation: animation,\n      ref: ref\n    });\n    _this5.saveTweenOneTag[key] = tag;\n    return tag;\n  };\n\n  this.performEnter = function (key, i) {\n    var interval = transformArguments(_this5.props.interval, key, i)[0];\n    var delay = transformArguments(_this5.props.delay, key, i)[0];\n    _this5.placeholderTimeoutIds[key] = ticker.timeout(_this5.performEnterBegin.bind(_this5, key), interval * i + delay);\n    if (_this5.keysToEnter.indexOf(key) >= 0) {\n      _this5.keysToEnter.splice(_this5.keysToEnter.indexOf(key), 1);\n    }\n  };\n\n  this.performEnterBegin = function (key) {\n    var childrenShow = _this5.state.childrenShow;\n    childrenShow[key] = true;\n    delete _this5.keysToEnterPaused[key];\n    ticker.clear(_this5.placeholderTimeoutIds[key]);\n    delete _this5.placeholderTimeoutIds[key];\n    _this5.setState({ childrenShow: childrenShow });\n  };\n\n  this.performLeave = function (key) {\n    ticker.clear(_this5.placeholderTimeoutIds[key]);\n    delete _this5.placeholderTimeoutIds[key];\n  };\n\n  this.enterBegin = function (key, e) {\n    var elem = e.target;\n    var animatingClassName = _this5.props.animatingClassName;\n    elem.className = elem.className.replace(animatingClassName[1], '');\n    if (elem.className.indexOf(animatingClassName[0]) === -1) {\n      elem.className = (elem.className + ' ' + animatingClassName[0]).trim();\n    }\n    _this5.childrenShow[key] = true;\n  };\n\n  this.enterComplete = function (key, e) {\n    if (_this5.keysToEnterPaused[key] || _this5.keysToLeave.indexOf(key) >= 0) {\n      return;\n    }\n    var elem = e.target;\n    elem.className = elem.className.replace(_this5.props.animatingClassName[0], '').trim();\n    _this5.tweenToEnter[key] = true;\n    _this5.props.onEnd({ key: key, type: 'enter', target: elem });\n  };\n\n  this.leaveBegin = function (key, e) {\n    var elem = e.target;\n    var animatingClassName = _this5.props.animatingClassName;\n    elem.className = elem.className.replace(animatingClassName[0], '');\n    if (elem.className.indexOf(animatingClassName[1]) === -1) {\n      elem.className = (elem.className + ' ' + animatingClassName[1]).trim();\n    }\n    delete _this5.tweenToEnter[key];\n  };\n\n  this.leaveComplete = function (key, e) {\n    // 切换时同时触发 onComplete。 手动跳出。。。\n    if (toArrayChildren(_this5.props.children).findIndex(function (c) {\n      return c && c.key === key;\n    }) >= 0) {\n      return;\n    }\n    var childrenShow = _this5.state.childrenShow;\n    delete childrenShow[key];\n    delete _this5.saveTweenOneTag[key];\n    delete _this5.childrenShow[key];\n    if (_this5.keysToLeave.indexOf(key) >= 0) {\n      _this5.keysToLeave.splice(_this5.keysToLeave.indexOf(key), 1);\n    }\n    var needLeave = _this5.keysToLeave.some(function (c) {\n      return childrenShow[c];\n    });\n    if (!needLeave) {\n      var currentChildren = toArrayChildren(getChildrenFromProps(_this5.props));\n      _this5.setState({\n        children: currentChildren,\n        childrenShow: childrenShow\n      });\n    }\n    var elem = e.target;\n    elem.className = elem.className.replace(_this5.props.animatingClassName[1], '').trim();\n    _this5.props.onEnd({ key: key, type: 'leave', target: elem });\n  };\n};\n\nQueueAnim.isQueueAnim = true;\nexport default polyfill(QueueAnim);"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { slicedToArray as _slicedToArray } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport { useState, useEffect } from 'react';\nimport createFocusTrap from 'focus-trap';\n\nfunction toggleTrap(trap, isActive) {\n  if (isActive) {\n    trap.activate();\n  } else {\n    trap.deactivate();\n  }\n}\n/**\n * React Hook for trapping the focus inside a particular DOM element. Useful for building modal\n * components.\n *\n * @param element  The element to trap focus inside of\n * @param isActive Whether or not to activate the trap\n * @param initialFocus The initial element inside the trap to focus\n */\n\n\nfunction useFocusTrap(element) {\n  var isActive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var initialFocus = arguments.length > 2 ? arguments[2] : undefined;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      trap = _useState2[0],\n      setTrap = _useState2[1]; // If `initialFocus` is not provided, `element` becomes the initial focus.\n\n\n  var initialFocusElement = initialFocus || element;\n  useEffect(function () {\n    // If we've already created a trap, toggle it based on the isActive status\n    if (trap) {\n      toggleTrap(trap, isActive); // Otherwise, if there's no trap, but there is a valid element that needs to be trapped\n    } else if (element && initialFocusElement && isActive) {\n      // Create the trap and store a reference to it\n      var newTrap = createFocusTrap(element, {\n        clickOutsideDeactivates: true,\n        // Set initial focus to the modal wrapper itself instead of focusing on the first\n        // focusable element by default\n        initialFocus: initialFocusElement\n      });\n      setTrap(newTrap); // And toggle it based on isActive status\n\n      toggleTrap(newTrap, isActive);\n    } // When the component unmounts, we deactivate the trap, if there is one\n\n\n    return function () {\n      if (trap) {\n        trap.deactivate();\n      }\n    };\n  }, [element, isActive, trap, initialFocusElement]);\n}\n\nexport default useFocusTrap;","map":{"version":3,"sources":["../../../utils/use-focus-trap.ts"],"names":["trap","isActive","initialFocus","setTrap","useState","initialFocusElement","useEffect","toggleTrap","element","newTrap","createFocusTrap","clickOutsideDeactivates"],"mappings":";;;;AAGA,SAAA,UAAA,CAAA,IAAA,EAAA,QAAA,EAA8D;MAC1D,Q,EAAc;AACVA,IAAAA,IAAI,CAAJA,QAAAA;AADJ,G,MAEO;AACHA,IAAAA,IAAI,CAAJA,UAAAA;;;;;;;;;;;;;AAYO,SAAA,YAAA,CAAA,OAAA,EAIP;MAFJC,QAEI,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAFO,K;MACXC,YACI,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,S;;kBACoBE,QADpB,E;;MACGJ,IADH,GAAA,UAAA,CAAA,CAAA,C;MACSG,OADT,GAAA,UAAA,CAAA,CAAA,C,CAAA,CAAA;;;MAIEE,mBAAmB,GAAGH,YAAY,IAAxC,O;AAEAI,EAAAA,SAAS,CAAC,YAAoB;;QAE1B,I,EAAU;AACNC,MAAAA,UAAU,CAAA,IAAA,EADJ,QACI,CAAVA,CADM,CAAA;AAAV,K,MAGO,IAAIC,OAAO,IAAPA,mBAAAA,IAAJ,QAAA,EAAgD;;UAE7CC,OAAO,GAAGC,eAAe,CAAA,OAAA,EAAU;AACrCC,QAAAA,uBAAuB,EADc,IAAA;;;AAIrCT,QAAAA,YAAY,EAAEG;AAJuB,OAAV,C;AAM/BF,MAAAA,OAAO,CAR4C,OAQ5C,CAAPA,CARmD,CAAA;;AAUnDI,MAAAA,UAAU,CAAA,OAAA,EAAVA,QAAU,CAAVA;AAfsB,KAAA,CAAA;;;WAmBnB,YAAY;UACf,I,EAAU;AACNP,QAAAA,IAAI,CAAJA,UAAAA;;AAFR,K;AAnBK,GAAA,EAwBN,CAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAxBHM,mBAwBG,CAxBM,CAATA","sourcesContent":["import { useState, useEffect } from 'react';\nimport createFocusTrap, { FocusTrap } from 'focus-trap';\n\nfunction toggleTrap(trap: FocusTrap, isActive: boolean): void {\n    if (isActive) {\n        trap.activate();\n    } else {\n        trap.deactivate();\n    }\n}\n\n/**\n * React Hook for trapping the focus inside a particular DOM element. Useful for building modal\n * components.\n *\n * @param element  The element to trap focus inside of\n * @param isActive Whether or not to activate the trap\n * @param initialFocus The initial element inside the trap to focus\n */\nexport default function useFocusTrap(\n    element: HTMLElement | null,\n    isActive = false,\n    initialFocus: HTMLElement | null,\n): void {\n    const [trap, setTrap] = useState<FocusTrap>();\n\n    // If `initialFocus` is not provided, `element` becomes the initial focus.\n    const initialFocusElement = initialFocus || element;\n\n    useEffect((): (() => void) => {\n        // If we've already created a trap, toggle it based on the isActive status\n        if (trap) {\n            toggleTrap(trap, isActive);\n            // Otherwise, if there's no trap, but there is a valid element that needs to be trapped\n        } else if (element && initialFocusElement && isActive) {\n            // Create the trap and store a reference to it\n            const newTrap = createFocusTrap(element, {\n                clickOutsideDeactivates: true,\n                // Set initial focus to the modal wrapper itself instead of focusing on the first\n                // focusable element by default\n                initialFocus: initialFocusElement,\n            });\n            setTrap(newTrap);\n            // And toggle it based on isActive status\n            toggleTrap(newTrap, isActive);\n        }\n\n        // When the component unmounts, we deactivate the trap, if there is one\n        return (): void => {\n            if (trap) {\n                trap.deactivate();\n            }\n        };\n    }, [element, isActive, trap, initialFocusElement]);\n}\n"]},"metadata":{},"sourceType":"module"}